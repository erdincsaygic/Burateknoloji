@model PaymentRequestEditViewModel

@{
    ViewData["Title"] = "Bakiye Yükleme";
}

@section css{
    <link href="~/areas/panel/css/jquery/jquery-ui.css" rel="stylesheet" />

    <style>
        .bank {
            cursor: pointer !important;
        }

        .active-bank {
            border: 1px solid rgba(91,104,235,1) !important;
        }
    </style>
}

<input type="hidden" id="jsonBanks" value="@JsonConvert.SerializeObject(Model.Banks)" />

<div class="row my-2">
    @for (int i = 0; i < Model.Banks.Count; i++)
    {
        <div class="col-lg-2 @(i==0?"offset-lg-2":"mt-lg-0 mt-2")">
            <div class="card border bank @(i==0?"active-bank":"")" data-bank-id="@Model.Banks[i].ID">
                <div class="card-body fs-5">
                    <img src="~/img/banks/@Model.Banks[i].Img" width="210" height="84" />
                </div>
            </div>
        </div>
    }
</div>

<div class="row mt-2">
    <div class="col-lg-8 offset-lg-2">

        <div class="card border bg-white">
            <div class="card-body">

                <div class="row mt-2">
                    <div class="col-lg-4 offset-lg-4 text-center">
                        <img src="~/img/banks/nobank.png" width="210" height="84" id="imgBank" />
                    </div>
                </div>

                <div class="row mt-2">
                    <div class="col-lg-7 offset-lg-2">
                        <label class="form-label">
                            <span class="fw-bold">IBAN :</span> <span id="spanIban"></span>
                        </label>
                    </div>
                    <div class="col-lg-1 mt-2 d-lg-block d-none">
                        <a href="javascript:copytoclipboard('spanIban')">
                            <i class="fa-solid fa-copy"></i>
                        </a>
                    </div>
                </div>

                <div class="row mt-2">
                    <div class="col-lg-7 offset-lg-2">
                        <label class="form-label">
                            <span class="fw-bold">ALICI ADI :</span> <span id="spanAlici"></span>
                        </label>
                    </div>
                    <div class="col-lg-1 mt-2 d-lg-block d-none">
                        <a href="javascript:copytoclipboard('spanAlici')">
                            <i class="fa-solid fa-copy"></i>
                        </a>
                    </div>
                </div>

                <div class="row mt-2">
                    <div class="col-lg-7 offset-lg-2">
                        <label class="form-label">
                            <span class="fw-bold">ŞUBE & HESAP NO :</span> <span id="spanSube"></span>
                        </label>
                    </div>
                    <div class="col-lg-1 mt-2 d-lg-block d-none">
                        <a href="javascript:copytoclipboard('spanSube')">
                            <i class="fa-solid fa-copy"></i>
                        </a>
                    </div>
                </div>

                <div class="row mt-4">
                    <div class="col-lg-3 offset-lg-5">
                        <div class="d-grid">
                            <button type="button" class="btn btn-block btn-custom" id="btnNotifyPayment"><i class="fa fa-paper-plane"></i>&nbsp;&nbsp;&nbsp;Ödeme Bildirimi</button>
                        </div>
                    </div>
                </div>

            </div>
        </div>

    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="mdlPaymentRequest" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body bg-light p-0 m-0">

                <div class="card border-0 bg-light">
                    <div class="card-header text-white bg-secondary mt-3 mx-4 text-center fw-bold">
                        Ödeme Bildirim Formu
                    </div>

                    <div class="card-body">
                        <form asp-controller="PaymentRequest" asp-action="Save" asp-antiforgery="true" id="frmDef"
                              data-ajax="true" data-ajax-method="POST"
                              data-ajax-begin="onBegin" data-ajax-failure="onFailure"
                              data-ajax-success="onSuccess" data-ajax-complete="onComplete">

                            <input type="hidden" asp-for="entity.ID" />

                            <div class="row">
                                <div class="col-lg-12">
                                    <label class="form-label m-0"><span style="color:red">* </span>Banka Adı</label>
                                    <input type="text" class="form-control" id="txtBank" disabled="disabled">
                                    <input type="hidden" asp-for="entity.IDBank" />
                                </div>
                            </div>

                            <div class="row mt-3">
                                <div class="col-lg-12">
                                    <label class="form-label m-0"><span style="color:red">* </span>Gönderen Adı-Soyadı</label>
                                    <input type="text" class="form-control" asp-for="entity.SenderName" maxlength="100">
                                </div>
                            </div>

                            <div class="row mt-3">
                                <div class="col-lg-8 pe-0">
                                    <label class="form-label m-0"><span style="color:red">* </span>Ödeme Tarih ve Saati</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control bg-white datepicker" asp-for="entity.ActionDate" value="@DateTime.Today.ToString("dd.MM.yyyy")" readonly="readonly" maxlength="10" />
                                        <span class="input-group-append">
                                            <span class="input-group-text bg-light d-block">
                                                <i class="fa fa-calendar-days"></i>
                                            </span>
                                        </span>
                                        <input type="text" class="form-control timepicker" asp-for="entity.ActionTime" value="@DateTime.Now.ToString("HH:mm")" maxlength="5" />
                                        <span class="input-group-append">
                                            <span class="input-group-text bg-light d-block">
                                                <i class="fa fa-clock"></i>
                                            </span>
                                        </span>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <label class="form-label m-0"><span style="color:red">* </span>Ödeme Tutarı</label>
                                    <input type="text" class="form-control text-end" asp-for="entity.Amount" maxlength="10">
                                </div>
                            </div>

                            <div class="row mt-4">
                                <div class="col-lg-4 offset-lg-2">
                                    <div class="d-grid">
                                        <button type="submit" class="btn btn-dark btn-block">Bildirim Yap</button>
                                    </div>
                                </div>
                                <div class="col-lg-4 mt-lg-0 mt-2">
                                    <div class="d-grid">
                                        <button type="button" class="btn btn-secondary btn-block" data-bs-dismiss="modal">Vazgeç</button>
                                    </div>
                                </div>
                            </div>

                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="toast-container position-relative bottom-0 start-50 translate-middle-x">
    <div class="toast align-items-center text-white bg-dark border-0" style="width:5.8rem;" role="alert" aria-live="assertive" aria-atomic="true" id="toastPlacement">
        <div class="toast-body">
            Kopyalandı
        </div>
    </div>
</div>

@section js{
    <script type="text/javascript" src="~/areas/panel/js/jquery/jquery-validate.js"></script>
    <script type="text/javascript" src="~/areas/panel/js/jquery/jquery-unobtrusive-ajax.js"></script>
    <script type="text/javascript" src="~/areas/panel/js/mask/imask.js"></script>
    <script type="text/javascript" src="~/areas/panel/js/custom/numeric-format.js"></script>
    <script type="text/javascript" src="~/areas/panel/js/jquery/jquery-timepicker.js"></script>
    <script type="text/javascript" src="~/areas/panel/js/jquery/jquery-ui.js"></script>
    <script type="text/javascript" src="~/areas/panel/js/jquery/jquery-datepicker-tr.js"></script>
    <script type="text/javascript" src="~/areas/panel/js/views/paymentrequest/edit.js"></script>
}